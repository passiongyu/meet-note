vue 정리 


- setup함수는 composition api를 사용하기 위한 진입점 역할을 한다.(컴포넌트가 생성되기 이전에 실행되는 훅) setup함수에서 반응형 데이터를 선언하면 템플릿에서 사용할 수 있다. 반응형 api를 사용하여 반응형 상태를 선언하고 setup에서 객체를 반환하여 템플릿에서 사용할 수 있다. 
  setup함수의 첫번째 매개변수로 props가 넘어온다. 
  두번째 매개변수로는 context가 넘어온다. 


- async await은 같이 써야한다 
await은 

- onMounted -> 다 렌더링 되고 나서 실행됨. 

- emit은 클릭이벤트 같은거 근데 하위 컴포넌트에서 발생하는 것. 

- prop을 다른 컴포넌트로 전달할 때
~~~html
<TheView noteList="noteList" /> 이렇게 해버리면 문자열로만 전달된다.
<TheView :noteList="noteList" /> 이렇게 : 또는 v-bind:를 써야 변수가 전달된다.
~~~
- 속성도 v-bind로 바인딩이 가능하다. 
- prop를 받는쪽에선 
~~~javascript

const props = defineProps({
  noteList: {
    type: Object,
  },
})
//이렇게 하고 사용하면 된다. 
~~~

- 클릭이벤트 일어나서 노트 리스트 데이터가 바뀌어서 리렌더링이 일어날 때 스크립트에서 특정 로직을 실행시키려면
~~~javascript
<template>
  <div class="layout-container d-flex">
    <main class="flex-grow-1 p-3">
      <router-view />
    </main>
    {{ noteList }}
  </div>
</template>

<script setup>
import { watchEffect } from 'vue'

const { noteList } = defineProps({
  noteList: {
    type: Object,
  },
})

watchEffect(() => {
  console.log('noteList render', noteList)
})

~~~


- 그리고 변수 noteList를 화면에 띄우려면 중괄호 사용하면 된다. 가장 기본적인 바인딩 형태이다. 그리고 반응형 데이터가 변경될 때마다 템플릿에도 갱신된다. 갱신안되게 하려면 v-once사용해야한다. 
~~~html
{{noteList}}
~~~

- 자바스크립트에서 특정 모듈에서 함수나 변수를 가져오려면
~~~javascript
import { useRouter } from 'vue-router'
const useRouter = userRouter()
~~~

- 스크립트 단에서 특정 페이지로 라우팅하려면
~~~javascript

import { useRouter } from 'vue-router'
const useRouter = userRouter()
~~~

- 컴포넌트의 상태 즉, 반응형 데이터(ref, reactive)의 변경이 감지될 때 특정 로직을 실행시켜야할 때 watch나 watchEffect를 사용한다. 
~~~javascript

//최초에 실행안되고 즉시실행 옵션 true시 최초에 실행됨. 
watch(감지할 데이터, 콜백함수)


//최초 한번 실행됨
//lazy를 통해 포커스가 바뀔 때 실행하게끔 사용 가능. 
watchEffect(()=> { 
	//여기 안에 있는 반응형 데이터의 감지가 일어날 때마다 발생
});

~~~


- 참조형 반응형 변수를 선언하려면 reactive를 사용하면 된다. 그런데 reactive는 객체만 가능해서 primitive용으로 ref도 사용가능하다. 
~~~javascript
//참조형 변수 반응형 사용용도
const val1 = reactive({
	"id":1
});

//primitive변수 반응형 사용용도
const val2 = ref("test");//val2는 value라는 속성 하나만 가지고 있는 객체임 
//템플릿에서는 value빼고 val2로 사용 

~~~
- 반응형 객체에서 반응형을 잃지 않고 구조분해할당을 하려면 toRefs, toRef이용 하면 된다. 
- 반응형 데이터를 다른 컴포넌트에 쓰고 싶지만 그 컴포넌트에서 그 반응형 데이터를 변화시키고 싶지 않을 때는 readonly를 사용한다. 
~~~javascript
const original = reactive({count:0});
const copy = readonly(original);
~~~

- provide, inject를 사용하여 단순히 컴포넌트를 props를 전달하는 용도로 사용하게 하지말고 깊이가 어느정도든지 props를 제공받을 수 있도록 할 수 있다. 
  - 단, 이때 반응형 데이터를 조작하는 함수도 provider컴포넌트에서 같이 제공해서 관리 주체가 한 곳이면 좋다. 
